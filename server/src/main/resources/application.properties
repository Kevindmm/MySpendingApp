# ========================================
# JPA / Hibernate Configuration
# ========================================
# SQLite custom dialect (required for non-standard JDBC drivers)
spring.jpa.database-platform=com.kevindmm.spendingapp.dialect.SQLiteDialect

# SQLite-compatible seed data (production/dev)
spring.sql.init.data-locations=classpath:data.sql


# DDL auto: update (only for dev - use Flyway/Liquibase in prod)
spring.jpa.hibernate.ddl-auto=update

# Preserve entity field names (avoid camelCase -> snake_case conversion)
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# SQL logging (disable in prod)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Force Hibernate to prefer VARCHAR for UUID columns (helps DB init with string UUIDs)
spring.jpa.properties.hibernate.type.preferred_column_type_for_uuid=VARCHAR(36)
spring.jpa.properties.hibernate.type.preferred_sql_type_for_uuid=VARCHAR

# ========================================
# Database Initialization
# ========================================
# Allow data.sql to run after Hibernate schema creation
spring.jpa.defer-datasource-initialization=true

# Execute data.sql on startup (dev only - remove in prod)
spring.sql.init.mode=always

# ========================================
# DataSource Configuration
# ========================================
# SQLite database file location (Docker volume: /app/data)
spring.datasource.url=jdbc:sqlite:/app/data/mySpendingApp.db

# Custom property used by DbConfig class
spendingapp.db.url=jdbc:sqlite:/app/data/mySpendingApp.db

#Local development settings (uncomment for local testing)
#spring.datasource.url=jdbc:sqlite:../data/mySpendingApp.db
#spendingapp.db.url=jdbc:sqlite:../data/mySpendingApp.db

# ========================================
# Actuator Endpoints
# ========================================
# Expose only health and info endpoints
management.endpoints.web.exposure.include=health,info

# ========================================
# Logging Configuration
# ========================================
# Log file location (Docker volume: /app/logs)
logging.file.name=/app/logs/mySpendingApp.log
# Root log level
logging.level.root=INFO

# Suppress Hibernate schema warnings
logging.level.org.hibernate.tool.schema=ERROR

# ========================================
# JWT Configuration
# ========================================
# JWT secret key (use a strong, secure key in production)
jwt.secret=${JWT_SECRET:YourSuperSecretKeyThatIsAtLeast32CharactersLongOG!}
#100 hours
jwt.expiration=360000000